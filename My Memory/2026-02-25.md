# Session Memory — 2026-02-25

## Summary
- Fixed SDPOD_AUTO_SOL_DV_242 (was failing as of 2026-02-24)
- Updated framework knowledge base (copilot-instructions.md)
- Created GitHub repository and pushed project
- Diagnosed agents pipeline crash (wrong bin path)
- Added `USE_PIPELINE` toggle to `run_test.py`

---

## Tests Status

### ✅ SDPOD_AUTO_SOL_DV_241 — `createAndShareApprovedPublicSolutionFromDV`
- **PASSING** (carried forward from yesterday)

### ✅ SDPOD_AUTO_SOL_DV_242 — `createUnapprovedSolutionWithCustomTopicRevDateExpDate`
- **PASSING** — confirmed from report `createUnapprovedSolutionWithCustomTopicRevDateExpDate_1772022472104`
- Log: "Unapproved solution with custom topic, review date and expiry date created successfully"

**Root cause fixes applied:**
1. `SolutionLocators.java` — `SOLUTION_ADD`: `contains(text(),' Add ')` → `normalize-space(text())='Add'`
   (prevents matching "Add And Approve" button)
2. `solution_data.json` — `sol_unapproved_pub_cust_temp_exp_rev_date_cust_topic`: `is_public: true` → `false`
   (`fillInputForAnEntity` silently skips booleans → form default unchecked = private = false)
3. `SolutionBase.java` — removed `actions.click(SOLUTION_IS_PUBLIC_1)` and redundant `waitForAjaxComplete()`

**Convention discovered:**
- Methods creating **public** solutions explicitly call `actions.click(SOLUTION_IS_PUBLIC_1)` after `fillInputForAnEntity`
- Methods creating **private/unapproved** solutions do NOT click it — `is_public` in JSON has no UI effect

---

## Key Framework Learnings (new today)

### `fillInputForAnEntity` boolean skip
- `getValueAsStringFromInputUsingAPIPath()` returns `null` for JSON booleans (only handles `instanceof String`)
- `"is_public": true/false` is **always silently skipped** — checkboxes MUST be clicked via explicit locators

### `actions.click()` internal wait
- `actions.click(locator)` calls `waitForAjaxComplete()` internally before clicking
- **Never add** `waitForAjaxComplete()` after a click — it's redundant and causes double waits

### Locator exact match pattern
- For buttons like "Add" / "Add And Approve" — always use `normalize-space(text())='Add'` not `contains(text(),' Add ')`

### `preProcess` vs method body for API calls
- API calls must go in `preProcess` (admin session) not the method body (user session)
- `preProcess` silent catch: `catch(Exception) { return false; }` swallows all errors invisibly
- If `preProcess` returns false → test is silently skipped (no error shown)

### Targeted compile (full compile broken — 67 pre-existing errors)
```bash
DEPS=/home/balaji-12086/Desktop/Workspace/Zide/dependencies
BIN=/home/balaji-12086/Desktop/Workspace/Zide/ai-automation-qa/AutomaterSelenium/bin
SRC=/home/balaji-12086/Desktop/Workspace/Zide/ai-automation-qa/AutomaterSelenium/src
CP="$BIN:$(find "$DEPS" -name "*.jar" | tr '\n' ':')"
javac -encoding UTF-8 -cp "$CP" -d "$BIN" \
  "$SRC/com/zoho/automater/selenium/modules/solutions/solution/common/SolutionLocators.java" \
  "$SRC/com/zoho/automater/selenium/modules/solutions/solution/SolutionBase.java"
```
- `skip_compile=True` in `run_test.py` means only the 2 patched standalone files are recompiled by the runner
- Always run targeted compile manually after editing `SolutionBase.java` or `SolutionLocators.java`

---

## GitHub Repository

- **Repo**: https://github.com/balaji-muthukumaran-12086/AI_AUTOMATION_CODE_GENERATOR.git
- **Branch**: `main`
- **Commit**: `edc4e3c` — "Initial commit — AI Automation QA orchestrator pipeline"
- **Excluded** (in `.gitignore`): `AutomaterSelenium/`, `AutomaterSeleniumFramework/`, `.venv/`, `.env`, `logs/`, `reports/`, `generated/`, `knowledge_base/chroma_db/`
- **41 files pushed**: all agents, knowledge_base, ingestion, config, evaluation, templates, `.github/copilot-instructions.md`

---

## Knowledge Base / copilot-instructions.md

- Created `.github/copilot-instructions.md` — auto-loaded by VS Code Copilot at session start
- Merged all learnings from `My Memory/2026-02-24.md` + `My Memory/vision.md` into it
- Covers: project structure, compile strategy, `fillInputForAnEntity` gotchas, checkbox convention,
  REST API browser-JS architecture, `preProcess` session lifecycle, runner `_parse_success()` logic,
  fixed bugs history, AI pipeline phases

---

## Agents Pipeline Fixes

### Root cause of crash
- `pipeline.py` had wrong `pre_compiled_bin_dir` path:
  - ❌ `/home/balaji-12086/Desktop/Workspace/Zide/AutomaterSelenium_Latest/bin` (doesn't exist)
  - ✅ `/home/balaji-12086/Desktop/Workspace/Zide/ai-automation-qa/AutomaterSelenium/bin`
- This caused Java `Browser` to be `null` → `NPE: Cannot invoke Browser.getBrowserName() because browser is null`

### Also fixed: `app.properties` Firefox paths
- `app.properties` had paths without `Zide/` — actual driver location is `/home/balaji-12086/Desktop/Workspace/Drivers/` (no `Zide/`)

### `run_test.py` — new `USE_PIPELINE` toggle
- `USE_PIPELINE = False` → RunnerAgent directly (fast, existing test, no code generation)
- `USE_PIPELINE = True` → Full agents pipeline: Planner → Coverage → Coder → Reviewer → Output → Runner → (Healer if fail)
- `FEATURE_DESCRIPTION` drives the pipeline when `USE_PIPELINE=True`

---

## Two Flows Clarification

| | Agent Pipeline (`main.py` / `USE_PIPELINE=True`) | Copilot Chat |
|---|---|---|
| Input | Feature description text | Chat messages |
| Output | Generated `.java` test files + run result | Direct file edits |
| Autonomy | Fully autonomous (fire & forget) | Interactive |
| Use case | Generate new tests at scale | Debug/fix/maintain |
| Current status | Phase 0.5 done — being tested | ✅ Active daily use |

---

## Next Session TODO

- [ ] Test agents pipeline end-to-end with `USE_PIPELINE=True` in `run_test.py`
  - Feature: "Create a solution and verify status in detail page"
  - Method: `createUnapprovedSolutionWithCustomTopicRevDateExpDate`
- [ ] Fix `app.properties` Firefox/geckodriver paths if pipeline still crashes
- [ ] Push today's pipeline fixes to GitHub
- [ ] Phase 1 — Document Ingestion Agent (accept PDF/DOCX/XLSX → structured use-cases)

---

## Current `run_test.py` config
```python
USE_PIPELINE = True
RUN_CONFIG = {
    "entity_class":  "Solution",
    "method_name":   "createUnapprovedSolutionWithCustomTopicRevDateExpDate",
    "url":           "https://sdpodqa-auto1.csez.zohocorpin.com:9090/",
    "admin_mail_id": "jaya.kumar+org1admin1t0@zohotest.com",
    "email_id":      "jaya.kumar+org1admin1t0@zohotest.com",
    "portal_name":   "portal1",
    "skip_compile":  True,
}
```
